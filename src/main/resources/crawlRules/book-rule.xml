<?xml version="1.0" encoding="UTF-8" ?>
<rules xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns="http://nambm.io/crawling-rule"
       xsi:schemaLocation="http://nambm.io/crawling-rule crawling.xsd">
    <rule>
        <siteName>Vinabook</siteName>
        <name>Sách vừa phát hành trong tuần</name>
        <url>https://www.vinabook.com/sach-moi-phat-hanh</url>
        <basedUrl>https://www.vinabook.com/</basedUrl>
        <incrementParam>?page={i}</incrementParam>
        <incrementFrom>1</incrementFrom>
        <incrementTo>0</incrementTo>
        <fragmentJsQuerySelector> </fragmentJsQuerySelector>
        <fragmentXpath>//table[contains(@class, "template-products")]</fragmentXpath>
        <collectionXpath>*//td[contains(@class, "compact")]</collectionXpath>
        <item>
            <detailXpath detailName="id" prefix="VNB_">*//input[contains(@name, 'product_id')]/@value</detailXpath>
            <detailXpath detailName="title">*//a[contains(@class, "product-title")]/text()</detailXpath>
            <detailXpath detailName="link">*//a[contains(@class, "product-title")]/@href</detailXpath>
            <detailXpath detailName="image">*//a[contains(@class, "image-border")]//img/@data-src</detailXpath>
            <detailXpath detailName="authors">*//span[contains(@class, "author")]/text()</detailXpath>
            <detailXpath detailName="oldPrice">*//div[contains(@class, "price-wrap")]//span[contains(@class, "list-price")]/text()</detailXpath>
            <detailXpath detailName="price">*//div[contains(@class, "price-wrap")]//span[contains(@class, "price-num")]/text()</detailXpath>
            <detailXpath detailName="status">*//span[contains(@class, "qty-out-of-stock")]/text()</detailXpath>
        </item>
    </rule>
    <rule>
        <siteName>Vinabook</siteName>
        <name>Kho Sách Giảm Giá</name>
        <url>https://www.vinabook.com/kho-sach-giam-gia</url>
        <basedUrl>https://www.vinabook.com/</basedUrl>
        <incrementParam>?page={i}</incrementParam>
        <incrementFrom>1</incrementFrom>
        <incrementTo>1</incrementTo>
        <fragmentJsQuerySelector> </fragmentJsQuerySelector>
        <fragmentXpath>//table[contains(@class, "template-products")]</fragmentXpath>
        <collectionXpath>*//td[contains(@class, "compact")]</collectionXpath>
        <item>
            <detailXpath detailName="id" prefix="VNB_">*//input[contains(@name, 'product_id')]/@value</detailXpath>
            <detailXpath detailName="title">*//a[contains(@class, "product-title")]/text()</detailXpath>
            <detailXpath detailName="link">*//a[contains(@class, "product-title")]/@href</detailXpath>
            <detailXpath detailName="image">*//a[contains(@class, "image-border")]//img/@data-src</detailXpath>
            <detailXpath detailName="authors">*//span[contains(@class, "author")]/text()</detailXpath>
            <detailXpath detailName="oldPrice">*//div[contains(@class, "price-wrap")]//span[contains(@class, "list-price")]/text()</detailXpath>
            <detailXpath detailName="price">*//div[contains(@class, "price-wrap")]//span[contains(@class, "price-num")]/text()</detailXpath>
            <detailXpath detailName="status">*//span[contains(@class, "qty-out-of-stock")]/text()</detailXpath>
        </item>
    </rule>

    <rule>
        <siteName>Pibook</siteName>
        <name>Kho Sách Giảm Giá</name>
        <url>https://pibook.vn/sach-pibook-khuyen-doc</url>
        <basedUrl>https://pibook.vn/</basedUrl>
        <incrementParam>?page={i}</incrementParam>
        <incrementFrom>1</incrementFrom>
        <incrementTo>0</incrementTo>
        <fragmentJsQuerySelector>div.dmslider</fragmentJsQuerySelector>
        <fragmentXpath>//div[contains(@class, "dmslider")]</fragmentXpath>
        <collectionXpath>*//li</collectionXpath>
        <item>
            <detailXpath detailName="id" prefix="PI_">substring-before(substring-after(p[@align='center']/a/@onclick, 'UpdateProduct('), ',')</detailXpath>
            <detailXpath detailName="title">div[contains(@class, "list1a1")]/a/text()</detailXpath>
            <detailXpath detailName="link" isRelativeURL="true">div[contains(@class, "list1a1")]/a/@href</detailXpath>
            <detailXpath detailName="image" isRelativeURL="true">div[contains(@class, "list1img")]//img/@data-original</detailXpath>
            <detailXpath detailName="authors">x/text()</detailXpath>
            <detailXpath detailName="oldPrice">div[contains(@class, "priceold")]/text()</detailXpath>
            <detailXpath detailName="price">div[contains(@class, "price1")]/text()</detailXpath>
            <detailXpath detailName="status">boolean(p[@align='center']/a)</detailXpath>
        </item>
    </rule>
</rules>